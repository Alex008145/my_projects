{"version":3,"file":"static/js/823.cedbe54f.chunk.js","mappings":"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","sources":["hooks/use-http.js","lib/api.js","webpack://react-complete-guide/./src/components/quotes/HighlightedQuote.module.css?c98c","components/quotes/HighlightedQuote.js","webpack://react-complete-guide/./src/components/comments/Comments.module.css?d88e","webpack://react-complete-guide/./src/components/comments/NewCommentForm.module.css?81c1","components/comments/NewCommentForm.js","webpack://react-complete-guide/./src/components/comments/CommentItem.module.css?204f","components/comments/CommentItem.js","webpack://react-complete-guide/./src/components/comments/CommentsList.module.css?06d6","components/comments/CommentsList.js","components/comments/Comments.js","pages/QuoteDetail.js"],"sourcesContent":["import { useReducer, useCallback } from 'react';\n\nfunction httpReducer(state, action) {\n  if (action.type === 'SEND') {\n    return {\n      data: null,\n      error: null,\n      status: 'pending',\n    };\n  }\n\n  if (action.type === 'SUCCESS') {\n    return {\n      data: action.responseData,\n      error: null,\n      status: 'completed',\n    };\n  }\n\n  if (action.type === 'ERROR') {\n    return {\n      data: null,\n      error: action.errorMessage,\n      status: 'completed',\n    };\n  }\n\n  return state;\n}\n\nfunction useHttp(requestFunction, startWithPending = false) {\n  const [httpState, dispatch] = useReducer(httpReducer, {\n    status: startWithPending ? 'pending' : null,\n    data: null,\n    error: null,\n  });\n\n  const sendRequest = useCallback(\n    async function (requestData) {\n      dispatch({ type: 'SEND' });\n      try {\n        const responseData = await requestFunction(requestData);\n        dispatch({ type: 'SUCCESS', responseData });\n      } catch (error) {\n        dispatch({\n          type: 'ERROR',\n          errorMessage: error.message || 'Something went wrong!',\n        });\n      }\n    },\n    [requestFunction]\n  );\n\n  return {\n    sendRequest,\n    ...httpState,\n  };\n}\n\nexport default useHttp;\n","const FIREBASE_DOMAIN =\n  \"https://react-redux-cf72c-default-rtdb.europe-west1.firebasedatabase.app\";\n\nexport async function getAllQuotes() {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Could not fetch quotes.\");\n  }\n\n  const transformedQuotes = [];\n\n  for (const key in data) {\n    const quoteObj = {\n      id: key,\n      ...data[key],\n    };\n\n    transformedQuotes.push(quoteObj);\n  }\n\n  return transformedQuotes;\n}\n\nexport async function getSingleQuote(quoteId) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes/${quoteId}.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Could not fetch quote.\");\n  }\n\n  const loadedQuote = {\n    id: quoteId,\n    ...data,\n  };\n\n  return loadedQuote;\n}\n\nexport async function addQuote(quoteData) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes.json`, {\n    method: \"POST\",\n    body: JSON.stringify(quoteData),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Could not create quote.\");\n  }\n\n  return null;\n}\n\nexport async function addComment(requestData) {\n  const response = await fetch(\n    `${FIREBASE_DOMAIN}/comments/${requestData.quoteId}.json`,\n    {\n      method: \"POST\",\n      body: JSON.stringify(requestData.commentData),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }\n  );\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Could not add comment.\");\n  }\n\n  return { commentId: data.name };\n}\n\nexport async function getAllComments(quoteId) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/comments/${quoteId}.json`);\n\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Could not get comments.\");\n  }\n\n  const transformedComments = [];\n\n  for (const key in data) {\n    const commentObj = {\n      id: key,\n      ...data[key],\n    };\n\n    transformedComments.push(commentObj);\n  }\n\n  return transformedComments;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"quote\":\"HighlightedQuote_quote__EauRS\"};","import classes from './HighlightedQuote.module.css';\n\nconst HighlightedQuote = (props) => {\n  return (\n    <figure className={classes.quote}>\n      <p>{props.text}</p>\n      <figcaption>{props.author}</figcaption>\n    </figure>\n  );\n};\n\nexport default HighlightedQuote;\n","// extracted by mini-css-extract-plugin\nexport default {\"comments\":\"Comments_comments__JaiQ-\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"NewCommentForm_form__4R-46\",\"loading\":\"NewCommentForm_loading__g40Cc\",\"control\":\"NewCommentForm_control__4xtgV\",\"actions\":\"NewCommentForm_actions__iU-kM\"};","import { useRef, useEffect } from \"react\";\n\nimport useHttp from \"../../hooks/use-http\";\nimport { addComment } from \"../../lib/api\";\nimport classes from \"./NewCommentForm.module.css\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\n\nconst NewCommentForm = (props) => {\n  const commentTextRef = useRef();\n\n  const { sendRequest, status, error } = useHttp(addComment);\n\n  const { onAddedComment } = props;\n\n  useEffect(() => {\n    if (status === \"completed\" && !error) {\n      onAddedComment();\n    }\n  }, [status, error, onAddedComment]);\n\n  const submitFormHandler = (event) => {\n    event.preventDefault();\n\n    const enteredText = commentTextRef.current.value;\n\n    // optional: Could validate here\n\n    sendRequest({ commentData: { text: enteredText }, quoteId: props.quoteId });\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitFormHandler}>\n      {status === \"pending\" && (\n        <div className=\"centered\">\n          <LoadingSpinner />\n        </div>\n      )}\n      <div className={classes.control} onSubmit={submitFormHandler}>\n        <label htmlFor=\"comment\">Your Comment</label>\n        <textarea id=\"comment\" rows=\"5\" ref={commentTextRef}></textarea>\n      </div>\n      <div className={classes.actions}>\n        <button className=\"btn\">Add Comment</button>\n      </div>\n    </form>\n  );\n};\n\nexport default NewCommentForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"CommentItem_item__DENoO\"};","import classes from './CommentItem.module.css';\n\nconst CommentItem = (props) => {\n  return (\n    <li className={classes.item}>\n      <p>{props.text}</p>\n    </li>\n  );\n};\n\nexport default CommentItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"comments\":\"CommentsList_comments__Hi4fW\"};","import CommentItem from './CommentItem';\nimport classes from './CommentsList.module.css';\n\nconst CommentsList = (props) => {\n  return (\n    <ul className={classes.comments}>\n      {props.comments.map((comment) => (\n        <CommentItem key={comment.id} text={comment.text} />\n      ))}\n    </ul>\n  );\n};\n\nexport default CommentsList;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport classes from \"./Comments.module.css\";\nimport NewCommentForm from \"./NewCommentForm\";\nimport useHttp from \"../../hooks/use-http\";\nimport { getAllComments } from \"../../lib/api\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\nimport CommentsList from \"./CommentsList\";\n\nconst Comments = () => {\n  const [isAddingComment, setIsAddingComment] = useState(false);\n  const params = useParams();\n\n  const { quoteId } = params;\n\n  const { sendRequest, status, data: loadedComments } = useHttp(getAllComments);\n\n  useEffect(() => {\n    sendRequest(quoteId);\n  }, [quoteId, sendRequest]);\n\n  const startAddCommentHandler = () => {\n    setIsAddingComment(true);\n  };\n\n  const addedCommentHandler = useCallback(() => {\n    sendRequest(quoteId);\n  }, [sendRequest, quoteId]);\n\n  let comments;\n\n  if (status === \"pending\") {\n    comments = (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (status === \"completed\" && loadedComments && loadedComments.length > 0) {\n    comments = <CommentsList comments={loadedComments} />;\n  }\n\n  if (\n    status === \"completed\" &&\n    (!loadedComments || loadedComments.length === 0)\n  ) {\n    comments = <p className=\"centered\">No comments were added yet!</p>;\n  }\n  return (\n    <section className={classes.comments}>\n      <h2>User Comments</h2>\n      {!isAddingComment && (\n        <button className=\"btn\" onClick={startAddCommentHandler}>\n          Add a Comment\n        </button>\n      )}\n      {isAddingComment && (\n        <NewCommentForm\n          quoteId={quoteId}\n          onAddedComment={addedCommentHandler}\n        />\n      )}\n      {comments}\n    </section>\n  );\n};\n\nexport default Comments;\n","import { Fragment, useEffect } from \"react\";\r\nimport { useParams, Route, Link, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport HighlightedQuote from \"../components/quotes/HighlightedQuote\";\r\nimport Comments from \"../components/comments/Comments\";\r\nimport useHttp from \"../hooks/use-http\";\r\nimport { getSingleQuote } from \"../lib/api\";\r\nimport LoadingSpinner from \"../components/UI/LoadingSpinner\";\r\n\r\nconst QuoteDetail = () => {\r\n  const match = useRouteMatch();\r\n  const params = useParams();\r\n\r\n  const { quoteId } = params;\r\n\r\n  const {\r\n    sendRequest,\r\n    status,\r\n    data: loadedQuote,\r\n    error,\r\n  } = useHttp(getSingleQuote, true);\r\n\r\n  useEffect(() => {\r\n    sendRequest(quoteId);\r\n  }, [sendRequest, quoteId]);\r\n\r\n  if (status === \"pending\") {\r\n    return (\r\n      <div className=\"centered\">\r\n        <LoadingSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <p className=\"centered\">{error}</p>;\r\n  }\r\n\r\n  if (!loadedQuote.text) {\r\n    return <p>No quote found!</p>;\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <HighlightedQuote text={loadedQuote.text} author={loadedQuote.author} />\r\n      <Route path={match.path} exact>\r\n        <div className=\"centered\">\r\n          <Link className=\"btn--flat\" to={`${match.url}/comments`}>\r\n            Show Comments\r\n          </Link>\r\n        </div>\r\n      </Route>\r\n      <Route path={`${match.path}/comments`}>\r\n        <Comments />\r\n      </Route>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default QuoteDetail;\r\n"],"names":["httpReducer","state","action","type","data","error","status","responseData","errorMessage","requestFunction","startWithPending","arguments","length","undefined","httpState","dispatch","useReducer","sendRequest","useCallback","async","requestData","message","FIREBASE_DOMAIN","getAllQuotes","response","fetch","concat","json","ok","Error","transformedQuotes","key","quoteObj","id","push","getSingleQuote","quoteId","addQuote","quoteData","method","body","JSON","stringify","headers","addComment","commentData","commentId","name","getAllComments","transformedComments","commentObj","props","_jsxs","className","classes","children","_jsx","text","author","commentTextRef","useRef","useHttp","onAddedComment","useEffect","submitFormHandler","event","preventDefault","enteredText","current","value","onSubmit","LoadingSpinner","htmlFor","rows","ref","comments","map","comment","CommentItem","Comments","isAddingComment","setIsAddingComment","useState","params","useParams","loadedComments","addedCommentHandler","CommentsList","onClick","startAddCommentHandler","NewCommentForm","QuoteDetail","match","useRouteMatch","loadedQuote","Fragment","HighlightedQuote","Route","path","exact","Link","to","url"],"sourceRoot":""}